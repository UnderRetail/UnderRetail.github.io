<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - UnderRetail</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">UNDERRETAIL</a>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#" id="adminLogoutBtn" class="btn-outline">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Admin Dashboard -->
    <section class="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h1>Admin Dashboard</h1>
                <div class="admin-info">
                    <span>Welcome, <strong>Administrator</strong></span>
                    <span class="last-login">Last login: Today, 14:32</span>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Total Investors</h3>
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="card-value">324</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> +24 this month
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Total Capital</h3>
                        <i class="fas fa-pound-sign"></i>
                    </div>
                    <div class="card-value">£2.4M</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> £450K this month
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Active Cycles</h3>
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="card-value">147</div>
                    <div class="card-change">
                        Completion: 68%
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Total Profit</h3>
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-value">£892K</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i> 37% margin
                    </div>
                </div>
            </div>

            <!-- Business Performance -->
            <div class="dashboard-section">
                <h2>Business Performance</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Monthly Revenue</h3>
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="card-value">£425,000</div>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Investor Growth</h3>
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="card-value">+24</div>
                        <div class="chart-container">
                            <canvas id="growthChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investor Management -->
            <div class="dashboard-section">
                <h2>Investor Management</h2>
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Investor ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Total Invested</th>
                                <th>Active Cycles</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#INV001</td>
                                <td>James Wilson</td>
                                <td>james@email.com</td>
                                <td>£12,500</td>
                                <td>3</td>
                                <td><span class="status-badge status-active">Active</span></td>
                                <td>
                                    <button class="btn-small">View</button>
                                    <button class="btn-small btn-outline">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#INV002</td>
                                <td>Sarah Johnson</td>
                                <td>sarah@email.com</td>
                                <td>£8,200</td>
                                <td>2</td>
                                <td><span class="status-badge status-active">Active</span></td>
                                <td>
                                    <button class="btn-small">View</button>
                                    <button class="btn-small btn-outline">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#INV003</td>
                                <td>Michael Brown</td>
                                <td>michael@email.com</td>
                                <td>£25,000</td>
                                <td>5</td>
                                <td><span class="status-badge status-vip">VIP</span></td>
                                <td>
                                    <button class="btn-small">View</button>
                                    <button class="btn-small btn-outline">Edit</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Payout Management -->
            <div class="dashboard-section">
                <h2>Payout Management</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Pending Payouts</h3>
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="card-value">£86,500</div>
                        <div class="payout-list">
                            <div class="payout-item">
                                <span>James Wilson</span>
                                <span>£2,500</span>
                                <span class="due-date">Due: 15 Nov</span>
                            </div>
                            <div class="payout-item">
                                <span>Sarah Johnson</span>
                                <span>£1,800</span>
                                <span class="due-date">Due: 18 Nov</span>
                            </div>
                            <div class="payout-item">
                                <span>Michael Brown</span>
                                <span>£3,200</span>
                                <span class="due-date">Due: 20 Nov</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Process Payout</h3>
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <form id="payoutForm">
                            <div class="form-group">
                                <label for="payoutInvestor">Select Investor</label>
                                <select id="payoutInvestor" required>
                                    <option value="">Choose investor...</option>
                                    <option value="INV001">James Wilson</option>
                                    <option value="INV002">Sarah Johnson</option>
                                    <option value="INV003">Michael Brown</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="payoutAmount">Amount (£)</label>
                                <input type="number" id="payoutAmount" required>
                            </div>
                            <div class="form-group">
                                <label for="payoutDate">Payment Date</label>
                                <input type="date" id="payoutDate" required>
                            </div>
                            <button type="submit" class="btn">Process Payment</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- System Analytics -->
            <div class="dashboard-section">
                <h2>System Analytics</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Tier Distribution</h3>
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="chart-container">
                            <canvas id="tierChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Performance Metrics</h3>
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="metrics-list">
                            <div class="metric">
                                <span>Avg. ROI</span>
                                <span class="metric-value">42.3%</span>
                            </div>
                            <div class="metric">
                                <span>Cycle Success Rate</span>
                                <span class="metric-value">94.7%</span>
                            </div>
                            <div class="metric">
                                <span>Avg. Cycle Time</span>
                                <span class="metric-value">18 days</span>
                            </div>
                            <div class="metric">
                                <span>Customer Satisfaction</span>
                                <span class="metric-value">4.8/5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Check if admin is logged in
        if (!localStorage.getItem('adminLoggedIn')) {
            window.location.href = 'admin-login.html';
        }

        // Logout functionality
        document.getElementById('adminLogoutBtn').addEventListener('click', function() {
            localStorage.removeItem('adminLoggedIn');
            window.location.href = 'admin-login.html';
        });

        // Payout form handling
        document.getElementById('payoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const investor = document.getElementById('payoutInvestor').value;
            const amount = document.getElementById('payoutAmount').value;
            const date = document.getElementById('payoutDate').value;
            
            alert(`Payout processed successfully!\n\nInvestor: ${investor}\nAmount: £${amount}\nDate: ${date}`);
            this.reset();
        });

        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'],
                    datasets: [{
                        label: 'Monthly Revenue',
                        data: [280, 320, 350, 380, 410, 390, 420, 450, 480, 510, 425],
                        borderColor: '#D4AF37',
                        backgroundColor: 'rgba(212, 175, 55, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                        x: { grid: { color: 'rgba(255,255,255,0.1)' } }
                    }
                }
            });

            // Growth Chart
            const growthCtx = document.getElementById('growthChart').getContext('2d');
            new Chart(growthCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'],
                    datasets: [{
                        label: 'New Investors',
                        data: [18, 22, 25, 28, 32, 30, 35, 38, 42, 45, 24],
                        backgroundColor: 'rgba(212, 175, 55, 0.7)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                        x: { grid: { color: 'rgba(255,255,255,0.1)' } }
                    }
                }
            });

            // Tier Distribution Chart
            const tierCtx = document.getElementById('tierChart').getContext('2d');
            new Chart(tierCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Bronze', 'Silver', 'Gold', 'VIP'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: ['#CD7F32', '#C0C0C0', '#FFD700', '#E5E4E2']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        });
    </script>
</body>
</html>
